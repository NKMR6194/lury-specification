<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Lury Specification 0.1 - 4. 式</title>
  <script src="../../common/loader.js"></script>
  <script type="text/javascript">loader_load('../../')</script>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-main markdown">

## 4. 式

この章では Lury の __式 (expression)__ について解説します。

<section id="atom">
### 4.1 原始式

_原始式_ (atom) は演算を含まない、式の基本的な要素です。

```
atom : identifier<span class="underline"></span>all
     | literal
```

<section id="identifier">
#### 4.1.1. 識別子

_識別子_ (identifier) はオブジェクトの名前を表現するために用います。構文解析における _identifier<span class="underline"></span>all_ はトークン Identifier とコンテキストキーワードを包括するものです。

トークン Identifier についての詳細は [2.5. 識別子](lexical.html#identifier) を参照してください。

</section>

<section id="literal">
#### 4.1.2. リテラル

```
literal : StringLiteral
        | EmbedStringLiteral
        | WysiwygStringLiteral
        | ImaginaryNumber
        | FloatNumber
        | Integer
```

_リテラル_ (literal) では文字列や数値の記述した値そのものを表すオブジェクトを生成します。これらは全て変更不能（イミュータブル）です。

トークン `StringLiteral`、`EmbedStringLiteral` そして `WysiwygStringLiteral` は String 型に、`ImaginaryNumber`、`FloatNumber` そして `Integer` はそれぞれ、Number 型から派生した Imaginary 型、Float 型、Integer 型となります。

数値はその値によって丸め誤差、オーバーフローやアンダーフローが起こりうることに注意してください。これは_表記上の値_と、_実際の値_と異なる場合があることを意味します。（__注__: 次期バージョンにて Number の派生クラスは最大値と最小値を取得できるよう機能が追加されます。）

</section>

</section>

<section id="primary">
#### 4.2. プライマリ

```
primary : atom
        | attribute<span class="underline"></span>reference
        | calling
```

_プライマリ_ (primary) には原始式と属性参照が含まれます。

プライマリで使われる演算子（ドット演算子）は Lury の中では最も優先順位が高く、ゆえにプライマリは最も結合度の高い要素となります。

<section id="attribute_reference">
#### 4.2.1. 属性参照

```
attribute<span class="underline"></span>reference : primary "." identifier<span class="underline"></span>all
```

_属性参照_ (attribute reference) はオブジェクトの属性 (attribute) を参照します。属性は _メンバ_ (member) とも呼ばれます。ドット演算子を介して、オブジェクトに含まれる属性にアクセスします。

</section>

<section id="calling">
#### 4.2.2. 関数呼び出し

```
calling        : primary '(' ')'
               | primary '(' arguments ')'

arguments      : argument
               | arguments ',' argument

argument       : expression
               | named<span class="underline"></span>argument

named<span class="underline"></span>argument : identifier<span class="underline"></span>all ':' expression
```

関数について、呼び出し側で実行に必要なデータを渡し、関数側で受け取ることができます。このようなデータを __引数__ と呼び、呼び出し側での引数を __実引数__ (argument)、関数側の引数を __仮引数__ (parameter) と区別して呼びます。

_calling_ は関数を呼び出し、実行するための構文です。関数呼び出しは関数名と丸括弧 `()` に挟まれた実引数リストによって構成されています。実引数を必要としない場合、実引数リストは空にすることができ、さらに丸括弧も省略可能です。

_名前付き引数_ (named argument) は、名前と仮引数値をコロン `:` で結合したものです。呼び出される関数に存在する仮引数名のみ使用することができます。同名の名前付き引数を複数回指定することはできません。

実引数リストの順番は、呼び出される仮引数の順番と一致している必要があります。名前付き引数の順番は任意に決めることができます。また、通常の実引数と名前付き引数は混在可能です。ただし、通常の実引数と名前付き引数で同一の仮引数を指定することはできません。

</section>

</section>

__ (work in progress) __

<section id="cite">
### 参考文献

- [6. 式 (expression) — Python 3.4.3 ドキュメント](http://docs.python.jp/3.4/reference/expressions.html)
- [式 - プログラミング言語 D (日本語訳)](http://www.kmonos.net/alang/d/expression.html)

</section>

      </div>
    </div>
  </div>
</body>
</html>
